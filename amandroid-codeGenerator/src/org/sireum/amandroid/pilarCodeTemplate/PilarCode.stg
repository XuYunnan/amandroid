group PilarCodeGenerator;

delimiters "$", "$"

ProcedureDecl(retTyp, procedureName, params, localVars, owner, body) ::= <<
procedure $retTyp$ $procedureName$($params ; separator=", "$) @owner $owner$ {
  $localVars$
	
  $body$
}
>>

LocalVars(locals) ::= <<
local nop;
	temp;
  $locals ; separator="\n"$
>>

LocalVar(typ, name) ::= <<
$typ$ $name$;
>>

Body(codeFragments) ::= <<
$codeFragments ; separator="\n"$
>>

CodeFragment(label, codes) ::= <<
#$label$. nop:= 0;
$codes ; separator="\n"$
>>

Code(code) ::= <<
# $code$;
>>

Label(num) ::= <<
Label$num$
>>

IfStmt(cond, label) ::= <<
if $cond$ then goto $label$
>>

GotoStmt(label) ::= <<
goto $label$
>>

ReturnStmt(variable) ::= <<
return $variable$
>>

AssignmentStmt(lhs, rhs) ::= <<
$lhs$:= $rhs$
>>

CondExp(lhs, rhs) ::= <<
$lhs$ == $rhs$ 
>>

NewExp(name) ::= <<
new $name$
>>

InvokeStmt(funcName, params, sig, typ) ::= <<
call temp:= $funcName$($params ; separator=", "$) @signature $sig$ @ type $typ$
>>